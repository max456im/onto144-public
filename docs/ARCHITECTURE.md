```markdown
# Архитектура onto144

## Общая схема

`onto144` реализует **модульный синтетический разум** с фиксированным пространством допустимых профилей (144). Архитектура разделена на три слоя:

1. **Ядро (Kernel)** — неизменяемые онтологические инварианты.
2. **Профиль (Profile)** — комбинаторная оболочка (знак + стихия + темперамент).
3. **Проекция (Projection)** — внешнее выражение через onto16.

Все компоненты подчиняются **Трём Законам Онтогенеза**.

## Инварианты

Ядро гарантирует три объективных инварианта:

- **Энергия (`E`)**: сохраняется локально, утечки компенсируются кредитом; `dE/dt ≤ 0` без внешней стимуляции.
- **Фаза (`φ`)**: дискретное состояние — либо `NoemaFast` (реактивный), либо `NoemaSlow` (рефлексивный).
- **Этика (`ε`)**: бинарный флаг, устанавливаемый валидатором SGCL; `ε = false` блокирует любую проекцию.

Инварианты **не могут быть переопределены** ни профилем, ни внешним вводом.

## Фазы познания

- **NoemaFast**: немедленная реакция на стимул. Генерирует предварительную onto16-проекцию.  
  → Используется в реальном времени, но **непостоянна**.

- **NoemaSlow**: симуляция в замедленном режиме с участием социальных инвариантов (Wu Xing, темперамент).  
  → Только проекции, подтверждённые в NoemaSlow, могут быть сериализованы или переданы через emitter.

Переход между фазами управляется модулем `state/phase.rs`.

## Энергетическая модель

Энергия — не метафора, а **измеряемая величина**:
- Каждый стимул потребляет `ΔE`.
- Проекция требует `E ≥ E_threshold`.
- При `E < 0` активируется режим энергосбережения: отключаются все профили, кроме базового (Earth–Phlegmatic).

См. `src/state/energy.rs`.

## Проекции

Проекция — это **онтологически обоснованное высказывание**, сериализованное в [onto16](ONTO16_SPEC.md).  
Каждая проекция содержит:
- Хеш профиля (SHA256 от SGCL-описания)
- Фазу (`fast`/`slow`)
- Энергетический баланс
- Цепочку причинности (causal network)

Проекции, не содержащие полную причинную сеть, отклоняются.
```